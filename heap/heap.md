# Heap
通常是一个可以被看做一颗完全二叉树的数组对象。

## 二叉堆（binary heap）
二叉堆本质上是一种完全二叉树，在逻辑上，等同于完全二叉树；物理上，直接借助向量实现。有两种类型：最大堆和最小堆。
* 最大堆：最大堆的任何一个父结点的值，都大于或等于它左、右孩子结点的值。
* 最小堆：最小堆的任何一个父结点的值，都小于或等于它左、右孩子结点的值。
* 堆顶：二叉堆的根结点叫做堆顶；最大堆的堆顶是整个堆中的最大元素；最小堆的堆顶是整个堆中的最小元素。
* 存储结构：二叉堆虽然是一颗完全二叉树，但它的存储方式一般不是链式存储，而是顺序存储。二叉堆中的所有结点都存储在数组中。假设一结点下标为i，则它的左孩子下标为2*i+1，右孩子下标为2*i+2，父节点下标为(i-1)/2。

1. 插入结点：当二叉堆插入结点时，插入位置是完全二叉树的最后一个位置。如果结点比父节点大（最大堆）或者小（最小堆），则需要将它同父结点交换位置。这个操作叫做向上调整。重复上述操作，直至形成新的堆。
2. 删除节点：二叉堆所删除的结点是处于堆顶的结点。为了继续维持完全二叉树的结构，需要把最后一个结点移动到堆顶位置。如果结点比它的子结点小（最大堆）或者大（最小堆），则需要与它左右子结点中较大的子结点（最大堆）或者较小的子结点（最小堆）交换位置。这个操作叫做向下调整。重复上述操作，直至形成新的堆。注意向下调整需要两层比较，而向上调整只需一次比较。
3. 构建二叉堆：构建二叉堆，就是把一个无序的完全二叉树调整为二叉堆，本质上就是让所有非叶子节点自下而上、自右而左依次向下调整。

* 优先队列（priority queue）：在优先队列中，元素被赋予优先级。当访问元素时，具有最高优先级的元素最先被删除。可以用二叉堆来实现优先队列。优先队列分为最大优先队列和最小优先队列两种情况。1）最大优先队列：无论入队顺序如何，都是当前最大的元素优先出队。2）最小优先队列：无论入队顺序如何，都是当前最小的元素优先出队。
* 堆排序（heap sort）：利用堆这种数据结构所设计的一种排序算法。1）把无序数组构建成二叉堆。需要从小到大排序，则构建成最大堆；需要从大到小排序，则构建成最小堆。2）循环删除堆顶元素，替换到二叉堆的末尾，调整堆产生新的堆顶。

## 左式堆（leftist heap）
引入左式堆的动机是为了能够有效的完成堆合并。保持堆序性，附加新条件，使得在堆合并过程中，只需调整很少部分的节点O(logn)。新条件是单侧倾斜：节点分布偏向于左侧，合并操作只涉及右侧。简单来讲，左式堆可以将右肩部的长度严格控制在O(logn)以内，因此可以将整体的时间复杂度控制在O(logn)以内。在结构拓扑上不见得是完全二叉树。

* 空节点路径长度（null path length）：指的是从该结点到达一个没有两个孩子的结点的最短距离。
* 左倾：对任何内节点x，都有npl(lc(x)) >= npl(rc(x))。即对任何内节点x，都有npl(x) = 1 + npl(rc(x))。
* 左式堆（leftist heap）：满足左倾性的堆，即是左式堆。左式堆的子堆，必是左式堆。左式堆倾向于更多的节点分布于左倾分支。
* 右侧链：从节点x出发，一直沿右分支前进所确立的那个分支。根节点的右侧链终点，必为全堆中最浅的外部节点。并且在包含n个节点的右式堆中右侧链长度不大于O(logn)。
* 合并：基于合并操作可以实现左式堆高效的插入和删除操作。